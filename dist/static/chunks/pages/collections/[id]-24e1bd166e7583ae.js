(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[314],{38557:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/collections/[id]",function(){return t(33970)}])},33970:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return E},default:function(){return F},fetchCollectionProducts:function(){return w}});var i=t(47568),r=t(70655),c=t(85893),s=t(93698),l=t(57469),o=t(26042),a=t(42984),u=t(217),d=t(61692),f=t(38948),g=t(15986),x=t(59403),p=t(20697),h=t(67294),v=t(97650),m=function(e){var n=e.collection,t=(0,p.jD1)().cart,i=(0,v.YD)(),r=i.ref,s=i.inView,l=(0,x.N)(["get_collection_products",n.id,null===t||void 0===t?void 0:t.id],(function(e){var i=e.pageParam;return w({pageParam:i,id:n.id,cartId:null===t||void 0===t?void 0:t.id})}),{getNextPageParam:function(e){return e.nextPage}}),m=l.data,_=l.hasNextPage,j=l.fetchNextPage,N=l.isFetchingNextPage,Z=l.isLoading,P=l.refetch;(0,h.useEffect)((function(){(null===t||void 0===t?void 0:t.region_id)&&P()}),[null===t||void 0===t?void 0:t.region_id,P]);var y=(0,a.Z)({pages:null===m||void 0===m?void 0:m.pages,region:null===t||void 0===t?void 0:t.region});return(0,h.useEffect)((function(){s&&_&&j()}),[s,_]),(0,c.jsxs)("div",{className:"content-container py-6",children:[(0,c.jsx)("div",{className:"mb-8 text-2xl-semi",children:(0,c.jsx)("h1",{children:n.title})}),(0,c.jsxs)("ul",{className:"grid grid-cols-2 small:grid-cols-3 medium:grid-cols-4 gap-x-4 gap-y-8",children:[y.map((function(e){return(0,c.jsx)("li",{children:(0,c.jsx)(f.Z,(0,o.Z)({},e))},e.id)})),Z&&!y.length&&(0,d.Z)(8).map((function(e){return(0,c.jsx)("li",{children:(0,c.jsx)(g.Z,{})},e)})),N&&(0,d.Z)((0,u.Z)(null===m||void 0===m?void 0:m.pages)).map((function(e){return(0,c.jsx)("li",{children:(0,c.jsx)(g.Z,{})},e)}))]}),(0,c.jsx)("div",{className:"py-16 flex justify-center items-center text-small-regular text-gray-700",ref:r,children:(0,c.jsx)("span",{ref:r})})]})},_=t(63269),j=t(18481),N=function(){return(0,c.jsxs)("div",{className:"content-container py-6",children:[(0,c.jsx)("div",{className:"animate-pulse mb-8",children:(0,c.jsx)("div",{className:"w-96 h-20 bg-gray-100"})}),(0,c.jsx)("ul",{className:"grid grid-cols-2 small:grid-cols-3 medium:grid-cols-4 gap-x-4 gap-y-8 flex-1",children:(0,d.Z)(8).map((function(e){return(0,c.jsx)("li",{children:(0,c.jsx)(g.Z,{})},e)}))})]})},Z=t(11163),P=t(36492),y=function(){var e=(0,i.Z)((function(e){return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return[4,s.pZ.collections.retrieve(e).then((function(e){var n=e.collection;return{id:n.id,title:n.title}}))];case 1:return[2,n.sent()]}}))}));return function(n){return e.apply(this,arguments)}}(),E=!0,w=function(){var e=(0,i.Z)((function(e){var n,t,i,c,l,o,a,u;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return n=e.pageParam,t=void 0===n?0:n,i=e.id,c=e.cartId,[4,s.pZ.products.list({limit:12,offset:t,collection_id:[i],cart_id:c,sales_channel_id:["sc_01H038FHAYEEG7X1PT3WNYV45E"]})];case 1:return l=r.sent(),o=l.products,a=l.count,u=l.offset,[2,{response:{products:o,count:a},nextPage:a>u+12?u+12:null}]}}))}));return function(n){return e.apply(this,arguments)}}(),b=function(e){var n=e.notFound,t=(0,Z.useRouter)(),i=t.query,r=t.isFallback,s=t.replace,o="string"===typeof i.id?i.id:"",a=(0,P.a)(["get_collection",o],(function(){return y(o)})),u=a.data,d=a.isError,f=a.isSuccess,g=a.isLoading;return n?(l.Q&&s("/404"),(0,c.jsx)(N,{})):(d&&s("/404"),r||g||!u?(0,c.jsx)(N,{}):f?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(_.Z,{title:u.title,description:"".concat(u.title," collection")}),(0,c.jsx)(m,{collection:u})]}):(0,c.jsx)(c.Fragment,{}))};b.getLayout=function(e){return(0,c.jsx)(j.Z,{children:e})};var F=b}},function(e){e.O(0,[652,504,673,632,700,774,888,179],(function(){return n=38557,e(e.s=n);var n}));var n=e.O();_N_E=n}]);